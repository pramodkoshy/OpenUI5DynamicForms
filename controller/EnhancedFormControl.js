sap.ui.define(["sap/ui/base/Object","sap/m/Input","sap/m/TextArea","sap/m/CheckBox","sap/m/DatePicker","sap/m/DateTimePicker","sap/m/ComboBox","sap/m/MultiComboBox","sap/m/Select","sap/m/RadioButtonGroup","sap/m/RadioButton","sap/m/StepInput","sap/m/Slider","sap/m/Switch","sap/m/ColorPicker","sap/m/TimePicker","sap/m/Link","sap/m/Text","sap/m/FormattedText","sap/m/Label","sap/m/HBox","sap/m/VBox","sap/m/Token","sap/m/TokenizerRenderer","sap/m/MultiInput","sap/ui/core/Item","sap/ui/core/ListItem","sap/ui/layout/form/FormElement","sap/ui/layout/form/FormContainer","sap/ui/richtexteditor/RichTextEditor","sap/ui/unified/FileUploader"],function(e,t,a,n,r,i,o,s,m,p,l,u,d,c,y,h,w,f,x,g,T,b,F,O,k,v,S,j,M,W,D){"use strict";return e.extend("com.supabase.easyui5.control.EnhancedFormControls",{constructor:function(t){e.call(this);this._oDataService=t},createField:function(e,t,a,n){n=n||{};const r=n.fieldType||e.type||"string";if(a){return this._createEditableField(e,t,r,n)}else{return this._createDisplayField(e,t,r,n)}},_createEditableField:function(e,w,f,x){const g=e.required===true;const T="{= ${"+x.errorsPath+"/"+e.name+"} ? 'Error' : 'None' }";const b="{"+x.errorsPath+"/"+e.name+"}";const O={required:g,enabled:!(e.editable===false),width:"100%",valueState:T,valueStateText:b};const S={string:()=>new t(Object.assign({value:{path:w,mode:"TwoWay"}},O)),text:()=>new a(Object.assign({value:{path:w,mode:"TwoWay"},rows:x.rows||3,growing:true,growingMaxLines:15},O)),richtext:()=>new W(Object.assign({value:{path:w,mode:"TwoWay"},editorType:x.editorType||"TinyMCE",width:"100%",height:"300px",customToolbar:true,showGroupFont:true,showGroupLink:true,showGroupInsert:true},x.editorOptions||{})),boolean:()=>new n(Object.assign({selected:{path:w,mode:"TwoWay"},text:e.checkboxLabel},O)),switch:()=>new c(Object.assign({state:{path:w,mode:"TwoWay"},customTextOn:x.textOn||"Yes",customTextOff:x.textOff||"No"},O)),date:()=>new r(Object.assign({value:{path:w,mode:"TwoWay",type:new sap.ui.model.type.Date({pattern:x.datePattern||"yyyy-MM-dd"})},valueFormat:x.valueFormat||"yyyy-MM-dd",displayFormat:x.displayFormat||"medium"},O)),datetime:()=>new i(Object.assign({value:{path:w,mode:"TwoWay",type:new sap.ui.model.type.DateTime({pattern:x.dateTimePattern||"yyyy-MM-dd'T'HH:mm:ss"})},valueFormat:x.valueFormat||"yyyy-MM-dd'T'HH:mm:ss",displayFormat:x.displayFormat||"medium"},O)),time:()=>new h(Object.assign({value:{path:w,mode:"TwoWay",type:new sap.ui.model.type.Time({pattern:x.timePattern||"HH:mm:ss"})},valueFormat:x.valueFormat||"HH:mm:ss",displayFormat:x.displayFormat||"medium"},O)),number:()=>new t(Object.assign({value:{path:w,mode:"TwoWay",type:new sap.ui.model.type.Float({minFractionDigits:x.minFractionDigits||0,maxFractionDigits:x.maxFractionDigits||2})},type:"Number"},O)),integer:()=>new u(Object.assign({value:{path:w,mode:"TwoWay",type:new sap.ui.model.type.Integer},min:x.min!==undefined?x.min:0,max:x.max!==undefined?x.max:999999,step:x.step||1},O)),slider:()=>new d(Object.assign({value:{path:w,mode:"TwoWay"},min:x.min!==undefined?x.min:0,max:x.max!==undefined?x.max:100,step:x.step||1,showAdvancedTooltip:true,showHandleTooltip:true},O)),email:()=>new t(Object.assign({value:{path:w,mode:"TwoWay"},type:"Email"},O)),url:()=>new t(Object.assign({value:{path:w,mode:"TwoWay"},type:"Url"},O)),phone:()=>new t(Object.assign({value:{path:w,mode:"TwoWay"},type:"Tel"},O)),password:()=>new t(Object.assign({value:{path:w,mode:"TwoWay"},type:"Password"},O)),color:()=>new y(Object.assign({colorString:{path:w,mode:"TwoWay"},mode:"HSL"},O)),relation:()=>{const t=new o(Object.assign({selectedKey:{path:w,mode:"TwoWay"},showSecondaryValues:true,filterSecondaryValues:true},O));if(this._oDataService&&e.relation){this._loadRelationOptions(t,e,x)}return t},multirelation:()=>{const t=new s(Object.assign({selectedKeys:{path:w,mode:"TwoWay"},showSecondaryValues:true,filterSecondaryValues:true},O));if(this._oDataService&&e.relation){this._loadRelationOptions(t,e,x)}return t},tags:()=>{const e=new k(Object.assign({value:{path:w,mode:"TwoWay"},showValueHelp:true,enableMultiLineMode:true},O));if(x.tokensPath){const t={path:x.tokensPath,template:new F({key:"{key}",text:"{text}"})};e.bindTokens(t)}return e},select:()=>{const e=new m(Object.assign({selectedKey:{path:w,mode:"TwoWay"}},O));if(x.items&&Array.isArray(x.items)){x.items.forEach(t=>{e.addItem(new v({key:t.key,text:t.text}))})}return e},radio:()=>{const e=new p(Object.assign({selectedIndex:{path:w,mode:"TwoWay",formatter:function(e){if(x.items&&Array.isArray(x.items)){return x.items.findIndex(t=>t.key===e)}return-1}},columns:x.columns||1},O));if(x.items&&Array.isArray(x.items)){x.items.forEach(t=>{e.addButton(new l({text:t.text,tooltip:t.tooltip}))})}return e},file:()=>new D(Object.assign({value:{path:w,mode:"TwoWay"},uploadUrl:x.uploadUrl||"",uploadOnChange:x.uploadOnChange===true,maximumFileSize:x.maximumFileSize||10,fileType:x.fileTypes||["jpg","png","pdf"],buttonText:x.buttonText||"Browse...",placeholder:x.placeholder||"Choose a file"},O))};if(S[f]){return S[f]()}return S["string"]()},_createDisplayField:function(e,t,a,n){const r={string:()=>new f({text:{path:t},wrapping:true}),text:()=>new f({text:{path:t},wrapping:true,maxLines:n.maxLines||5}),richtext:()=>new x({htmlText:{path:t}}),boolean:()=>new f({text:{path:t,formatter:function(e){return e?"Yes":"No"}}}),date:()=>new f({text:{path:t,formatter:function(e){if(!e)return"";try{const t=new Date(e);if(isNaN(t.getTime()))return"";return t.toLocaleDateString()}catch(e){return""}}}}),datetime:()=>new f({text:{path:t,formatter:function(e){if(!e)return"";try{const t=new Date(e);if(isNaN(t.getTime()))return"";return t.toLocaleString()}catch(e){return""}}}}),time:()=>new f({text:{path:t,formatter:function(e){if(!e)return"";try{let t;if(e.includes("T")||e.includes("-")){t=new Date(e)}else{const a=e.split(":");t=new Date;t.setHours(a[0]||0);t.setMinutes(a[1]||0);t.setSeconds(a[2]||0)}if(isNaN(t.getTime()))return"";return t.toLocaleTimeString()}catch(t){return e}}}}),number:()=>new f({text:{path:t,formatter:function(e){if(e===undefined||e===null)return"";const t=n.decimals!==undefined?n.decimals:2;return parseFloat(e).toFixed(t)}}}),integer:()=>new f({text:{path:t,formatter:function(e){if(e===undefined||e===null)return"";return parseInt(e,10)}}}),email:()=>new w({text:{path:t},href:{path:t,formatter:function(e){return e?"mailto:"+e:""}},target:"_blank"}),url:()=>new w({text:{path:t},href:{path:t},target:"_blank"}),phone:()=>new w({text:{path:t},href:{path:t,formatter:function(e){return e?"tel:"+e:""}}}),relation:()=>new f({text:{path:t+"_text"}}),tags:()=>{const e=new T({wrap:sap.m.FlexWrap.Wrap,renderType:sap.m.FlexRendertype.Bare});if(n.tokensPath){const t={path:n.tokensPath,templateShareable:false,template:new f({text:"{text}"}).addStyleClass("sapMTokenizer sapMToken sapUiTinyMarginEnd sapUiTinyMarginBottom")};e.bindAggregation("items",t)}else{const a={path:t,formatter:function(e){if(!e)return[];let t;if(typeof e==="string"){t=e.split(",").map(e=>e.trim())}else if(Array.isArray(e)){t=e}else{return[]}return t.map(e=>({text:e}))}};const n={path:a.path,formatter:a.formatter,templateShareable:false,template:new f({text:"{text}"}).addStyleClass("sapMTokenizer sapMToken sapUiTinyMarginEnd sapUiTinyMarginBottom")};e.bindAggregation("items",n)}return e},select:()=>new f({text:{path:t,formatter:function(e){if(n.items&&Array.isArray(n.items)){const t=n.items.find(t=>t.key===e);return t?t.text:e}return e}}}),radio:()=>new f({text:{path:t,formatter:function(e){if(n.items&&Array.isArray(n.items)){const t=n.items.find(t=>t.key===e);return t?t.text:e}return e}}}),file:()=>new w({text:{path:t,formatter:function(e){if(!e)return"";const t=e.split("/");return t[t.length-1]}},href:{path:t},target:"_blank"})};if(r[a]){return r[a]()}return r["string"]()},_loadRelationOptions:function(e,t,a){const n=t.relation;this._oDataService.getMetadata(n).then(e=>{const t=e.primaryKey||"id";const a=e.titleField||t;return this._oDataService.getRelationOptions(n,t,a)}).then(n=>{e.removeAllItems();if(!t.required){e.addItem(new v({key:"",text:a.emptyItemText||"- None -"}))}n.forEach(t=>{e.addItem(new v({key:t.key,text:t.text}))})}).catch(t=>{console.error("Error loading relation options:",t);e.removeAllItems();e.addItem(new v({key:"",text:"Error loading options"}))})}})});
//# sourceMappingURL=EnhancedFormControl.js.map