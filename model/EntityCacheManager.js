sap.ui.define(["sap/ui/base/Object","sap/ui/model/json/JSONModel"],function(e,t){"use strict";return e.extend("com.supabase.easyui5.model.EntityCacheManager",{constructor:function(){this._entityCache={};this._cacheMetadata={};this._defaultSettings={enabled:true,maxAgeSeconds:300,enforceMaxAge:false}},isCached:function(e,t){t=t||{};const a=t.ignoreCache||false;if(a){return false}return!!this._entityCache[e]},getEntityData:function(e,t,a){t=t||{};const n=t.ignoreCache||false;const c=!n&&this.isCached(e);if(c){console.log(`Using cached data for ${e}`);return Promise.resolve(this._entityCache[e])}else{console.log(`Loading fresh data for ${e}`);if(typeof a!=="function"){return Promise.reject(new Error("Load callback function is required when data is not cached"))}return a().then(t=>{this.setEntityCache(e,t);return t})}},setEntityCache:function(e,t,a){this._entityCache[e]=t;this._cacheMetadata[e]={timestamp:(new Date).getTime(),count:Array.isArray(t)?t.length:t?1:0,lastUpdated:(new Date).toLocaleString()};console.log(`Updated cache for ${e} with ${this._cacheMetadata[e].count} records`)},clearEntityCache:function(e){if(this._entityCache[e]){delete this._entityCache[e];delete this._cacheMetadata[e];console.log(`Cleared cache for ${e}`)}},clearAllCache:function(){this._entityCache={};this._cacheMetadata={};console.log("Cleared all entity caches")},getCacheStats:function(){const e={entityCount:Object.keys(this._entityCache).length,entities:{}};Object.keys(this._cacheMetadata).forEach(t=>{const a=this._cacheMetadata[t];const n=((new Date).getTime()-a.timestamp)/1e3;e.entities[t]={recordCount:a.count,ageSeconds:Math.round(n),lastUpdated:a.lastUpdated}});return e}})});
//# sourceMappingURL=EntityCacheManager.js.map