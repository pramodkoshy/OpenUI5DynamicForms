{"version":3,"file":"SchemaDetectionService.js","names":["sap","ui","define","BaseObject","extend","constructor","oSupabaseClient","call","this","_oSupabaseClient","_mSchemaCache","detectSchema","sTableId","Promise","resolve","_fetchSampleData","then","aSampleData","length","_fetchTableDefinition","oDetectedSchema","_detectSchemaFromSample","from","select","limit","data","error","console","catch","oDefaultSchema","_createDefaultSchema","oSchema","primaryKey","titleField","subtitleField","columns","relations","oFirstRecord","aFieldNames","Object","keys","aPrimaryKeyPatterns","sPattern","includes","aTitlePatterns","aSubtitlePatterns","forEach","sFieldName","aFieldValues","map","oRecord","filter","value","undefined","oColumn","_detectColumnProperties","push","_isLikelyRelationField","sRelatedTable","_detectRelatedTable","type","relation","table","foreignKey","name","label","_generateLabel","visible","editable","required","_matchesPattern","_endsWithPattern","replace","vSampleValue","find","v","sType","_detectTypeFromValue","aPatterns","sFieldLower","toLowerCase","some","sPatternLower","startsWith","endsWith","sLabel","split","s","charAt","toUpperCase","slice","join","vValue","sJsType","Number","isInteger","_isDateString","_isTimeString","_isDateTimeString","_isEmailString","_isUrlString","_isColorString","Date","Array","isArray","sValue","aDatePatterns","pattern","test","aTimePatterns","aDateTimePatterns","emailPattern","urlPattern","colorPattern","allValuesAreIdLike","every","substring","baseName"],"sources":["SchemaDetectionService-dbg.js"],"mappings":"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","ignoreList":[]}